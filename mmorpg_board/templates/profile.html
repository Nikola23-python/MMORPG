{% extends 'flatpages/default.html' %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <h1>Профиль пользователя: {{ user.username }}</h1>
        <div class="profile-avatar">
            {% if user.profile.avatar %}
                <img src="{{ user.profile.avatar.url }}" alt="Аватар" class="avatar">
            {% else %}
                <div class="default-avatar">{{ user.username|first|upper }}</div>
            {% endif %}
        </div>
    </div>

    <div class="profile-info">
        <div class="info-section">
            <h2>Основная информация</h2>
            <p><strong>Имя:</strong> {{ user.first_name }} {{ user.last_name }}</p>
            <p><strong>Email:</strong> {{ user.email }}</p>
            <p><strong>Дата регистрации:</strong> {{ user.date_joined|date:"d.m.Y" }}</p>
        </div>

        <div class="info-section">
            <h2>Активность</h2>
            <p>Публикаций: {{posts.count}}</p>
            <p>Комментариев: {{comments.count}}</p>
        </div>
    </div>

    <div class="profile-actions">
        <a href="#" class="btn btn-primary">Редактировать профиль</a>
        <a href="/accounts/password/reset/" class="btn btn-secondary">Сменить пароль</a>
    </div>

    <div class="user-posts">
        <h2>Комментарии к моим публикациям</h2>
        <form action="" method="get">
            {{ filterset.form.as_p }}
            <input type="submit" value="Найти">
        </form>
        {% if comments %}
            <div class="post-list">
                {% for comment in comments %}
                <p>
                    {{ comment.content | safe }} |
                    <span class="post-comment">
                        статус:
                        {% if comment.status %}
                        "принят"{% else %}
                        "не принят"|
                        <a href="{% url 'comment_accept' comment.pk %}" class='btn btn-success btn-sm'>принять</a> |
                        <a href="{% url 'comment_delete' comment.pk %}" class='btn btn-danger btn-sm'>удалить</a>
                        {% endif %}</span>
                </p>
                {% endfor %}
            </div>
        {% else %}
            <p>К выбранному посту еще нет комментариев.</p>
        {% endif %}
    </div>
</div>
{% endblock %}